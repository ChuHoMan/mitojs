{"version":3,"file":"wx-mini.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../packages/shared/src/config.ts","../../../packages/shared/src/constant.ts","../../../packages/shared/src/wx.ts","../../../packages/utils/src/is.ts","../../../packages/utils/src/global.ts","../../../packages/utils/src/logger.ts","../../../packages/utils/src/helpers.ts","../../../packages/utils/src/browser.ts","../../../packages/utils/src/exception.ts","../../../packages/utils/src/queue.ts","../../../packages/utils/src/Severity.ts","../../../packages/utils/src/httpStatus.ts","../../../packages/utils/src/errorId.ts","../../../packages/utils/src/wx.ts","../../../packages/browser/src/plugins/xhr.ts","../../../packages/wx-mini/src/utils.ts","../../../packages/wx-mini/src/plugins/wxApp.ts","../../../packages/wx-mini/src/plugins/wxConsole.ts","../../../packages/wx-mini/src/plugins/wxPage.ts","../../../packages/wx-mini/src/plugins/wxDom.ts","../../../packages/wx-mini/src/plugins/wxRoute.ts","../../../packages/core/src/breadcrumb.ts","../../../packages/core/src/subscribe.ts","../../../packages/core/src/baseClient.ts","../../../packages/core/src/baseOptions.ts","../../../packages/core/src/baseTransport.ts","../../../packages/wx-mini/src/wxOptions.ts","../../../packages/wx-mini/src/wxTransport.ts","../../../packages/wx-mini/src/wxClient.ts","../../../packages/wx-mini/src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { version } from '../package.json'\n\nexport const SDK_NAME = 'mitojs'\nexport const SDK_VERSION = version\n","import { BrowserBreadcrumbTypes, BrowserEventTypes } from './browser'\nimport { WxAppEvents, WxBreadcrumbTypes, WxEventTypes, WxPageEvents, WxRouteEvents } from './wx'\n\n/**\n * 上报错误类型\n */\nexport const enum ErrorTypes {\n  UNKNOWN = 'UNKNOWN',\n  UNKNOWN_FUNCTION = 'UNKNOWN_FUNCTION',\n  JAVASCRIPT = 'JAVASCRIPT',\n  LOG = 'LOG',\n  HTTP = 'HTTP',\n  VUE = 'VUE',\n  REACT = 'REACT',\n  RESOURCE = 'RESOURCE',\n  PROMISE = 'PROMISE',\n  ROUTE = 'ROUTE'\n}\n\n/**\n * 微信小程序钩子重写类型整合\n */\nexport type WxEvents = WxAppEvents | WxPageEvents | WxRouteEvents\n\n/**\n * 用户行为栈事件类型\n */\nexport type BreadcrumbTypes = BrowserBreadcrumbTypes | WxBreadcrumbTypes\n\n// export const BreadcrumbTypes = {\n//   ...BrowserBreadcrumbTypes,\n//   ...WxBreadcrumbTypes\n// }\n\n/**\n * 用户行为类型\n */\nexport const enum BREADCRUMBCATEGORYS {\n  HTTP = 'http',\n  USER = 'user',\n  DEBUG = 'debug',\n  EXCEPTION = 'exception',\n  LIFECYCLE = 'lifecycle'\n}\n\n/**\n * 所有重写事件类型整合\n */\nexport type EventTypes = BrowserEventTypes | WxEventTypes\n\nexport const MitoLog = 'Mito.log'\n\nexport const enum HttpTypes {\n  XHR = 'xhr',\n  FETCH = 'fetch'\n}\n\nexport const enum MethodTypes {\n  Get = 'GET',\n  Post = 'POST',\n  Put = 'PUT',\n  Delete = 'DELETE'\n}\n\nexport const enum HTTP_CODE {\n  BAD_REQUEST = 400,\n  UNAUTHORIZED = 401,\n  INTERNAL_EXCEPTION = 500\n}\n\nexport const enum ToStringTypes {\n  String = 'String',\n  Number = 'Number',\n  Boolean = 'Boolean',\n  RegExp = 'RegExp',\n  Null = 'Null',\n  Undefined = 'Undefined',\n  Symbol = 'Symbol',\n  Object = 'Object',\n  Array = 'Array',\n  process = 'process',\n  Window = 'Window',\n  Function = 'Function'\n}\n\nexport const ERROR_TYPE_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/\nconst globalVar = {\n  isLogAddBreadcrumb: true,\n  crossOriginThreshold: 1000\n}\nexport { globalVar }\n","export enum WxBreadcrumbTypes {\n  // platform\n  VUE = 'Vue',\n  REACT = 'React',\n  // base\n  ROUTE = 'Route',\n  CONSOLE = 'Console',\n  XHR = 'Xhr',\n  UNHANDLEDREJECTION = 'Unhandledrejection',\n  RESOURCE = 'Resource',\n  CODE_ERROR = 'Code Error',\n  CUSTOMER = 'Customer',\n  // app life cycle\n  APP_ON_SHOW = 'App On Show',\n  APP_ON_LAUNCH = 'App On Launch',\n  APP_ON_HIDE = 'App On Hide',\n  // page life cycle\n  PAGE_ON_LOAD = 'Page On Load',\n  PAGE_ON_SHOW = 'Page On Show',\n  PAGE_ON_READY = 'Page On Ready',\n  PAGE_ON_HIDE = 'Page On Hide',\n  PAGE_ON_UNLOAD = 'Page On Unload',\n  PAGE_ON_SHARE_APP_MESSAGE = 'Page On Share App Message',\n  PAGE_ON_SHARE_TIMELINE = 'Page On Share Timeline',\n  PAGE_ON_TAB_ITEM_TAP = 'Page On Tab Item Tap',\n  // wx Event\n  TAP = 'UI.Tap',\n  TOUCHMOVE = 'UI.Touchmove'\n}\n\nexport enum WxAppEvents {\n  AppOnLaunch = 'AppOnLaunch',\n  AppOnShow = 'AppOnShow',\n  AppOnHide = 'AppOnHide',\n  AppOnError = 'AppOnError',\n  AppOnPageNotFound = 'AppOnPageNotFound',\n  AppOnUnhandledRejection = 'AppOnUnhandledRejection'\n}\n\nexport enum WxPageEvents {\n  PageOnLoad = 'PageOnLoad',\n  PageOnShow = 'PageOnShow',\n  PageOnHide = 'PageOnHide',\n  PageOnReady = 'PageOnReady',\n  PageOnUnload = 'PageOnUnload',\n  PageOnShareAppMessage = 'PageOnShareAppMessage',\n  PageOnShareTimeline = 'PageOnShareTimeline',\n  PageOnTabItemTap = 'PageOnTabItemTap'\n}\n\nexport enum WxRouteEvents {\n  SwitchTab = 'switchTab',\n  ReLaunch = 'reLaunch',\n  RedirectTo = 'redirectTo',\n  NavigateTo = 'navigateTo',\n  NavigateBack = 'navigateBack',\n  NavigateToMiniProgram = 'navigateToMiniProgram',\n  RouteFail = 'routeFail'\n}\n\n/**\n *微信小程序需要监听的事件类型\n *\n * @export\n *  const@enum {number}\n */\nexport enum WxBaseEventTypes {\n  REQUEST = 'request',\n  CONSOLE = 'console',\n  ERROR = 'error',\n  UNHANDLEDREJECTION = 'unhandledrejection',\n  MINI_ROUTE = 'miniRoute',\n  DOM = 'dom',\n  //\n  MINI_PERFORMANCE = 'miniPerformance',\n  MINI_MEMORY_WARNING = 'miniMemoryWarning',\n  MINI_NETWORK_STATUS_CHANGE = 'miniNetworkStatusChange',\n  MINI_BATTERY_INFO = 'miniBatteryInfo'\n}\n\nexport enum LinstenerTypes {\n  Touchmove = 'touchmove',\n  Tap = 'tap',\n  Longtap = 'longtap',\n  Longpress = 'longpress'\n}\n\n// merge enum\nexport const WxEventTypes = Object.assign({}, WxAppEvents, WxPageEvents, WxBaseEventTypes)\nexport type WxEventTypes = WxAppEvents | WxPageEvents | WxBaseEventTypes\n","import { ToStringTypes } from '@mitojs/shared'\n\nexport const nativeToString = Object.prototype.toString\nexport function isType(type: string) {\n  return function (value: any): boolean {\n    return nativeToString.call(value) === `[object ${type}]`\n  }\n}\n\n/**\n * 检测变量类型\n * @param type\n */\nexport const variableTypeDetection = {\n  isNumber: isType(ToStringTypes.Number),\n  isString: isType(ToStringTypes.String),\n  isBoolean: isType(ToStringTypes.Boolean),\n  isNull: isType(ToStringTypes.Null),\n  isUndefined: isType(ToStringTypes.Undefined),\n  isSymbol: isType(ToStringTypes.Symbol),\n  isFunction: isType(ToStringTypes.Function),\n  isObject: isType(ToStringTypes.Object),\n  isArray: isType(ToStringTypes.Array),\n  isProcess: isType(ToStringTypes.process),\n  isWindow: isType(ToStringTypes.Window)\n}\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {../link isError}.\n *\n * ../param wat A value to be checked.\n * ../returns A boolean representing the result.\n */\nexport function isError(wat: any): boolean {\n  switch (nativeToString.call(wat)) {\n    case '[object Error]':\n      return true\n    case '[object Exception]':\n      return true\n    case '[object DOMException]':\n      return true\n    default:\n      return isInstanceOf(wat, Error)\n  }\n}\n\n/**\n * 检查是否是空对象\n * ../param obj 待检测的对象\n */\nexport function isEmptyObject(obj: Object): boolean {\n  return variableTypeDetection.isObject(obj) && Object.keys(obj).length === 0\n}\n\nexport function isEmpty(wat: any): boolean {\n  return (variableTypeDetection.isString(wat) && wat.trim() === '') || wat === undefined || wat === null\n}\n\n/**\n * Checks whether given value has a then function.\n * ../param wat A value to be checked.\n */\n// export function isThenable(wat: any): boolean {\n//   // tslint:disable:no-unsafe-any\n//   return Boolean(wat && wat.then && typeof wat.then === 'function')\n//   // tslint:enable:no-unsafe-any\n// }\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {../link isInstanceOf}.\n *\n * ../param wat A value to be checked.\n * ../param base A constructor to be used in a check.\n * ../returns A boolean representing the result.\n */\nexport function isInstanceOf(wat: any, base: any): boolean {\n  try {\n    // tslint:disable-next-line:no-unsafe-any\n    return wat instanceof base\n  } catch (_e) {\n    return false\n  }\n}\n\nexport function isExistProperty(obj: Object, key: string | number | symbol): boolean {\n  return obj.hasOwnProperty(key)\n}\n","import { EventTypes } from '@mitojs/shared'\nimport { Logger } from './logger'\nimport { DeviceInfo } from '@mitojs/types'\nimport { variableTypeDetection } from './is'\n\n/**\n *MITO的全局变量\n *\n * @export\n * @interface MitoSupport\n */\nexport interface MitoSupport {\n  logger: Logger\n  replaceFlag: { [key in EventTypes]?: boolean }\n  record?: any[]\n  deviceInfo?: DeviceInfo\n}\n\ninterface MITOGlobal {\n  console?: Console\n  __MITO__?: MitoSupport\n}\n\nexport const isNodeEnv = variableTypeDetection.isProcess(typeof process !== 'undefined' ? process : 0)\n\nexport const isWxMiniEnv =\n  variableTypeDetection.isObject(typeof wx !== 'undefined' ? wx : 0) &&\n  variableTypeDetection.isFunction(typeof App !== 'undefined' ? App : 0)\n\nexport const isBrowserEnv = variableTypeDetection.isWindow(typeof window !== 'undefined' ? window : 0)\n/**\n * 获取全局变量\n *\n * ../returns Global scope object\n */\nexport function getGlobal<T>() {\n  if (isBrowserEnv) return window as unknown as MITOGlobal & T\n  if (isWxMiniEnv) return wx as unknown as MITOGlobal & T\n  // it's true when run e2e\n  if (isNodeEnv) return process as unknown as MITOGlobal & T\n}\n// whether it is right use &\nconst _global = getGlobal<Window & WechatMiniprogram.Wx>()\nconst _support = getGlobalMitoSupport()\n/**\n * 获取全局变量__MITO__的引用地址\n *\n * @return {*}  {MitoSupport}\n */\nfunction getGlobalMitoSupport(): MitoSupport {\n  _global.__MITO__ = _global.__MITO__ || ({} as MitoSupport)\n  return _global.__MITO__\n}\n\nexport { _global, _support }\n\n_support.replaceFlag = _support.replaceFlag || {}\nconst replaceFlag = _support.replaceFlag\nexport function setFlag(replaceType: EventTypes, isSet: boolean): void {\n  if (replaceFlag[replaceType]) return\n  replaceFlag[replaceType] = isSet\n}\n\nexport function getFlag(replaceType: EventTypes): boolean {\n  return replaceFlag[replaceType] ? true : false\n}\n\nexport function supportsHistory(): boolean {\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  const chrome = (_global as any).chrome\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime\n  const hasHistoryApi = 'history' in _global && !!_global.history.pushState && !!_global.history.replaceState\n  return !isChromePackagedApp && hasHistoryApi\n}\n","import { _global, _support } from './global'\nconst PREFIX = 'MITO Logger'\n\nexport class Logger {\n  private enabled = false\n  private _console: Console = {} as Console\n  constructor() {\n    _global.console = console || _global.console\n    if (console || _global.console) {\n      const logType = ['log', 'debug', 'info', 'warn', 'error', 'assert']\n      logType.forEach((level) => {\n        if (!(level in _global.console)) return\n        this._console[level] = _global.console[level]\n      })\n    }\n  }\n  disable(): void {\n    this.enabled = false\n  }\n\n  bindOptions(debug: boolean): void {\n    this.enabled = debug ? true : false\n  }\n\n  enable(): void {\n    this.enabled = true\n  }\n\n  getEnableStatus() {\n    return this.enabled\n  }\n\n  log(...args: any[]): void {\n    if (!this.enabled) {\n      return\n    }\n    this._console.log(`${PREFIX}[Log]:`, ...args)\n  }\n  warn(...args: any[]): void {\n    if (!this.enabled) {\n      return\n    }\n    this._console.warn(`${PREFIX}[Warn]:`, ...args)\n  }\n\n  /**\n   * error不需要开启enable也要打印出来，提示用户错误信息\n   *\n   * @param {...any[]} args\n   * @memberof Logger\n   */\n  error(...args: any[]): void {\n    this._console.error(`${PREFIX}[Error]:`, ...args)\n  }\n}\n\nconst logger = _support.logger || (_support.logger = new Logger())\nexport { logger }\n","import { IAnyObject } from '@mitojs/types'\nimport { globalVar, HTTP_CODE, ToStringTypes } from '@mitojs/shared'\nimport { logger } from './logger'\nimport { nativeToString, variableTypeDetection } from './is'\n\nexport function getLocationHref(): string {\n  if (typeof document === 'undefined' || document.location == null) return ''\n  return document.location.href\n}\n\n// 用到所有事件名称\ntype TotalEventName = keyof GlobalEventHandlersEventMap | keyof XMLHttpRequestEventTargetEventMap | keyof WindowEventMap\n\n/**\n * 添加事件监听器\n *\n * ../export\n * ../param {{ addEventListener: Function }} target\n * ../param {keyof TotalEventName} eventName\n * ../param {Function} handler\n * ../param {(boolean | Object)} opitons\n * ../returns\n */\nexport function on(\n  target: { addEventListener: Function },\n  eventName: TotalEventName,\n  handler: Function,\n  opitons: boolean | unknown = false\n): void {\n  target.addEventListener(eventName, handler, opitons)\n}\n\n/**\n *\n * 重写对象上面的某个属性\n * ../param source 需要被重写的对象\n * ../param name 需要被重写对象的key\n * ../param replacement 以原有的函数作为参数，执行并重写原有函数\n * ../param isForced 是否强制重写（可能原先没有该属性）\n * ../returns void\n */\nexport function replaceOld(source: IAnyObject, name: string, replacement: (...args: any[]) => any, isForced = false): void {\n  if (source === undefined) return\n  if (name in source || isForced) {\n    const original = source[name]\n    const wrapped = replacement(original)\n    if (typeof wrapped === 'function') {\n      source[name] = wrapped\n    }\n  }\n}\n\n/**\n * 用&分割对象，返回a=1&b=2\n * ../param obj 需要拼接的对象\n */\nexport function splitObjToQuery(obj: Record<string, unknown>): string {\n  return Object.entries(obj).reduce((result, [key, value], index) => {\n    if (index !== 0) {\n      result += '&'\n    }\n    const valueStr = variableTypeDetection.isObject(value) || variableTypeDetection.isArray(value) ? JSON.stringify(value) : value\n    result += `${key}=${valueStr}`\n    return result\n  }, '')\n}\n\nexport const defaultFunctionName = '<anonymous>'\n/**\n * 需要获取函数名，匿名则返回<anonymous>\n * ../param {unknown} fn 需要获取函数名的函数本体\n * ../returns 返回传入的函数的函数名\n */\nexport function getFunctionName(fn: unknown): string {\n  if (!fn || typeof fn !== 'function') {\n    return defaultFunctionName\n  }\n  return fn.name || defaultFunctionName\n}\n\n// 函数防抖\n/**\n *\n * ../param fn 需要防抖的函数\n * ../param delay 防抖的时间间隔\n * ../param isImmediate 是否需要立即执行，默认为false，第一次是不执行的\n * ../returns 返回一个包含防抖功能的函数\n */\n// export const debounce = (fn: voidFun, delay: number, isImmediate = false): voidFun => {\n//   let timer = null\n//   return function (...args: any) {\n//     if (isImmediate) {\n//       fn.apply(this, args)\n//       isImmediate = false\n//       return\n//     }\n//     clearTimeout(timer)\n//     timer = setTimeout(() => {\n//       fn.apply(this, args)\n//     }, delay)\n//   }\n// }\n\n/**\n * 函数节流\n *\n * @export\n * @param {Function} fn 需要节流的函数\n * @param {number} delay 节流的时间间隔\n * @return {*}  {Function} 返回一个包含节流功能的函数\n */\nexport function throttle(fn: Function, delay: number): Function {\n  let canRun = true\n  return function (...args: any) {\n    if (!canRun) return\n    fn.apply(this, args)\n    canRun = false\n    setTimeout(() => {\n      canRun = true\n    }, delay)\n  }\n}\n\n/**\n * 原子字符中是否包含目标字符\n *\n * @export\n * @param {string} origin 原字符\n * @param {string} target 目标字符\n * @return {*}  {boolean}\n */\nexport function isInclude(origin: string, target: string): boolean {\n  return !!~origin.indexOf(target)\n}\n\n/**\n * 获取当前的时间戳\n *\n * @export\n * @return {*}  {number}\n */\nexport function getTimestamp(): number {\n  return Date.now()\n}\n\nexport function toStringAny(target: any, type: ToStringTypes): boolean {\n  return nativeToString.call(target) === `[object ${type}]`\n}\n\nexport function toStringValidateOption(target: any, targetName: string, expectType: ToStringTypes): boolean {\n  if (toStringAny(target, expectType)) return true\n  typeof target !== 'undefined' && logger.error(`${targetName}期望传入${expectType}类型，当前是${nativeToString.call(target)}类型`)\n  return false\n}\n\nexport function silentConsoleScope(callback: Function) {\n  globalVar.isLogAddBreadcrumb = false\n  callback()\n  globalVar.isLogAddBreadcrumb = true\n}\n\nexport function generateUUID(): string {\n  let d = new Date().getTime()\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n  return uuid\n}\n\nexport function unknownToString(target: unknown): string {\n  if (variableTypeDetection.isString(target)) {\n    return target as string\n  }\n  if (variableTypeDetection.isUndefined(target)) {\n    return 'undefined'\n  }\n  return JSON.stringify(target)\n}\n\nexport function getBigVersion(version: string) {\n  return Number(version.split('.')[0])\n}\n\nexport function isHttpFail(code: number) {\n  return code === 0 || code === HTTP_CODE.BAD_REQUEST || code > HTTP_CODE.UNAUTHORIZED\n}\n\n/**\n * 给url添加query\n * @param url\n * @param query\n */\nexport function setUrlQuery(url: string, query: object) {\n  const queryArr = []\n  Object.keys(query).forEach((k) => {\n    queryArr.push(`${k}=${query[k]}`)\n  })\n  if (url.indexOf('?') !== -1) {\n    url = `${url}&${queryArr.join('&')}`\n  } else {\n    url = `${url}?${queryArr.join('&')}`\n  }\n  return url\n}\n\nexport function interceptStr(str: string, interceptLength: number): string {\n  if (variableTypeDetection.isString(str)) {\n    return str.slice(0, interceptLength) + (str.length > interceptLength ? `:截取前${interceptLength}个字符` : '')\n  }\n  return ''\n}\n\n/**\n * 获取wx当前route的方法\n * 必须是在进入Page或Component构造函数内部才能够获取到currentPages\n * 否则都是在注册Page和Component时执行的代码，此时url默认返回'App'\n */\nexport function getCurrentRoute() {\n  if (!variableTypeDetection.isFunction(getCurrentPages)) {\n    return ''\n  }\n  const pages = getCurrentPages() // 在App里调用该方法，页面还没有生成，长度为0\n  if (!pages.length) {\n    return 'App'\n  }\n  const currentPage = pages.pop()\n  return setUrlQuery(currentPage.route, currentPage.options)\n}\n\n/**\n *将传入的字符串的首字母改为大写，其他不变\n *\n * @export\n * @param {string} str 原字符\n * @return {*}  {string}\n * @example xhr => Xhr\n */\nexport function firstStrtoUppercase(str: string): string {\n  return str.replace(/\\b(\\w)(\\w*)/g, function ($0: string, $1: string, $2: string) {\n    return `${$1.toUpperCase()}${$2}`\n  })\n}\n\n/**\n *将传入的字符串的首字母改为小写，其他不变\n *\n * @export\n * @param {string} str 原字符\n * @return {*}  {string}\n * @example Xhr => xhr\n */\nexport function firstStrtoLowerCase(str: string): string {\n  return str.replace(/\\b(\\w)(\\w*)/g, function ($0: string, $1: string, $2: string) {\n    return `${$1.toLowerCase()}${$2}`\n  })\n}\n\n/**\n * 安全的转换对象，包括循环引用，如果是循环引用就返回Circular\n *\n * @export\n * @param {object} obj 需要转换的对象\n * @return {*}  {string}\n */\nexport function safeStringify(obj: object): string {\n  const set = new Set()\n  const str = JSON.stringify(obj, function (_key, value) {\n    if (set.has(value)) {\n      return 'Circular'\n    }\n    typeof value === 'object' && set.add(value)\n    return value\n  })\n  set.clear()\n  return str\n}\n\n/**\n * 解决Vue3抛出的proxy对象循环引用的问题\n *\n * @export\n * @template T\n * @param {object} obj\n * @return {*}  {T}\n */\nexport function getObjectWithForIn<T = object>(obj: object): T {\n  if (!variableTypeDetection.isObject(obj)) obj\n  const result = {}\n  for (const key in obj) {\n    result[key] = obj[key]\n  }\n  return result as T\n}\n\nexport function validateOptionsAndSet(this: any, targetArr: [any, string][], expectType: ToStringTypes) {\n  targetArr.forEach(([target, targetName]) => toStringValidateOption(target, targetName, expectType) && (this[targetName] = target))\n}\n","import { BREADCRUMBCATEGORYS, BrowserBreadcrumbTypes, ErrorTypes } from '@mitojs/shared'\nimport { getLocationHref, getTimestamp } from './helpers'\nimport { Severity } from './Severity'\n\n/**\n * 返回包含id、class、innerTextde字符串的标签\n * @param target html节点\n */\nexport function htmlElementAsString(target: HTMLElement): string {\n  const tagName = target.tagName.toLowerCase()\n  if (tagName === 'body') {\n    return null\n  }\n  let classNames = target.classList.value\n  classNames = classNames !== '' ? ` class=\"${classNames}\"` : ''\n  const id = target.id ? ` id=\"${target.id}\"` : ''\n  const innerText = target.innerText\n  return `<${tagName}${id}${classNames !== '' ? classNames : ''}>${innerText}</${tagName}>`\n}\n\n/**\n * 将地址字符串转换成对象\n * @returns 返回一个对象\n */\nexport function parseUrlToObj(url: string): {\n  host?: string\n  path?: string\n  protocol?: string\n  relative?: string\n} {\n  if (!url) {\n    return {}\n  }\n\n  const match = url.match(/^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/)\n\n  if (!match) {\n    return {}\n  }\n\n  const query = match[6] || ''\n  const fragment = match[8] || ''\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment // everything minus origin\n  }\n}\n\nexport function getBreadcrumbCategoryInBrowser(type: BrowserBreadcrumbTypes) {\n  switch (type) {\n    case BrowserBreadcrumbTypes.XHR:\n    case BrowserBreadcrumbTypes.FETCH:\n      return BREADCRUMBCATEGORYS.HTTP\n    case BrowserBreadcrumbTypes.CLICK:\n    case BrowserBreadcrumbTypes.ROUTE:\n      // case BreadcrumbTypes.TAP:\n      // case BreadcrumbTypes.TOUCHMOVE:\n      return BREADCRUMBCATEGORYS.USER\n    case BrowserBreadcrumbTypes.CUSTOMER:\n    case BrowserBreadcrumbTypes.CONSOLE:\n      return BREADCRUMBCATEGORYS.DEBUG\n    // case BreadcrumbTypes.APP_ON_LAUNCH:\n    // case BreadcrumbTypes.APP_ON_SHOW:\n    // case BreadcrumbTypes.APP_ON_HIDE:\n    // case BreadcrumbTypes.PAGE_ON_SHOW:\n    // case BreadcrumbTypes.PAGE_ON_HIDE:\n    // case BreadcrumbTypes.PAGE_ON_SHARE_APP_MESSAGE:\n    // case BreadcrumbTypes.PAGE_ON_SHARE_TIMELINE:\n    // case BreadcrumbTypes.PAGE_ON_TAB_ITEM_TAP:\n    // return BREADCRUMBCATEGORYS.LIFECYCLE\n    case BrowserBreadcrumbTypes.UNHANDLEDREJECTION:\n    case BrowserBreadcrumbTypes.CODE_ERROR:\n    case BrowserBreadcrumbTypes.RESOURCE:\n    case BrowserBreadcrumbTypes.VUE:\n    case BrowserBreadcrumbTypes.REACT:\n    default:\n      return BREADCRUMBCATEGORYS.EXCEPTION\n  }\n}\n\n/**\n * 解析error的stack，并返回args、column、line、func、url:\n * @param ex\n * @param level\n */\nexport function extractErrorStack(ex: any, level: Severity) {\n  const normal = {\n    time: getTimestamp(),\n    url: getLocationHref(),\n    name: ex.name,\n    level,\n    message: ex.message\n  }\n  if (typeof ex.stack === 'undefined' || !ex.stack) {\n    return normal\n  }\n\n  const chrome =\n      /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,\n    gecko =\n      /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i,\n    winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n    // Used to additionally parse URL/line/column from eval frames\n    geckoEval = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i,\n    chromeEval = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/,\n    lines = ex.stack.split('\\n'),\n    stack = []\n\n  let submatch, parts, element\n  // reference = /^(.*) is undefined$/.exec(ex.message)\n\n  for (let i = 0, j = lines.length; i < j; ++i) {\n    if ((parts = chrome.exec(lines[i]))) {\n      const isNative = parts[2] && parts[2].indexOf('native') === 0 // start of line\n      const isEval = parts[2] && parts[2].indexOf('eval') === 0 // start of line\n      if (isEval && (submatch = chromeEval.exec(parts[2]))) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1] // url\n        parts[3] = submatch[2] // line\n        parts[4] = submatch[3] // column\n      }\n      element = {\n        url: !isNative ? parts[2] : null,\n        func: parts[1] || ErrorTypes.UNKNOWN_FUNCTION,\n        args: isNative ? [parts[2]] : [],\n        line: parts[3] ? +parts[3] : null,\n        column: parts[4] ? +parts[4] : null\n      }\n    } else if ((parts = winjs.exec(lines[i]))) {\n      element = {\n        url: parts[2],\n        func: parts[1] || ErrorTypes.UNKNOWN_FUNCTION,\n        args: [],\n        line: +parts[3],\n        column: parts[4] ? +parts[4] : null\n      }\n    } else if ((parts = gecko.exec(lines[i]))) {\n      const isEval = parts[3] && parts[3].indexOf(' > eval') > -1\n      if (isEval && (submatch = geckoEval.exec(parts[3]))) {\n        // throw out eval line/coluqqqqqqqqqqqqqqqqqqqqqqqqqqqqmn and use top-most line number\n        parts[3] = submatch[1]\n        parts[4] = submatch[2]\n        parts[5] = null // no column when eval\n      } else if (i === 0 && !parts[5] && typeof ex.columnNumber !== 'undefined') {\n        // FireFox uses this awesome columnNumber property for its top frame\n        // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n        // so adding 1\n        // NOTE: this hack doesn't work if top-most frame is eval\n        stack[0].column = ex.columnNumber + 1\n      }\n      element = {\n        url: parts[3],\n        func: parts[1] || ErrorTypes.UNKNOWN_FUNCTION,\n        args: parts[2] ? parts[2].split(',') : [],\n        line: parts[4] ? +parts[4] : null,\n        column: parts[5] ? +parts[5] : null\n      }\n    } else {\n      continue\n    }\n\n    if (!element.func && element.line) {\n      element.func = ErrorTypes.UNKNOWN_FUNCTION\n    }\n\n    stack.push(element)\n  }\n\n  if (!stack.length) {\n    return null\n  }\n  return {\n    ...normal,\n    stack: stack\n  }\n}\n","/**\n * 原生try函数\n * ../param fn try中执行的函数体\n * ../param errorFn 报错时执行的函数体，将err传入\n */\nexport function nativeTryCatch(fn: () => void, errorFn?: (err: any) => void): void {\n  try {\n    fn()\n  } catch (err) {\n    console.error('err', err)\n    if (errorFn) {\n      errorFn(err)\n    }\n  }\n}\n","import { _global } from './global'\nexport class Queue {\n  private micro: Promise<void>\n  private stack: any[] = []\n  private isFlushing = false\n  constructor() {\n    if (!('Promise' in _global)) return\n    this.micro = Promise.resolve()\n  }\n  addTask(fn: () => void): void {\n    if (typeof fn !== 'function') return\n    if (!('Promise' in _global)) {\n      fn()\n      return\n    }\n    this.stack.push(fn)\n    if (!this.isFlushing) {\n      this.isFlushing = true\n      this.micro.then(() => this.flushStack())\n    }\n  }\n  clear() {\n    this.stack = []\n  }\n  getStack() {\n    return this.stack\n  }\n  flushStack(): void {\n    const temp = this.stack.slice(0)\n    this.stack.length = 0\n    this.isFlushing = false\n    for (let i = 0; i < temp.length; i++) {\n      temp[i]()\n    }\n  }\n  // rollup queue\n}\n","/** 等级程度枚举 */\nexport enum Severity {\n  Else = 'else',\n  Error = 'error',\n  Warning = 'warning',\n  Info = 'info',\n  Debug = 'debug',\n  /** 上报的错误等级 */\n  Low = 'low',\n  Normal = 'normal',\n  High = 'high',\n  Critical = 'critical'\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace Severity {\n  /**\n   * Converts a string-based level into a {@link Severity}.\n   *\n   * @param level string representation of Severity\n   * @returns Severity\n   */\n  export function fromString(level: string): Severity {\n    switch (level) {\n      case 'debug':\n        return Severity.Debug\n      case 'info':\n      case 'log':\n      case 'assert':\n        return Severity.Info\n      case 'warn':\n      case 'warning':\n        return Severity.Warning\n      case Severity.Low:\n      case Severity.Normal:\n      case Severity.High:\n      case Severity.Critical:\n      case 'error':\n        return Severity.Error\n      default:\n        return Severity.Else\n    }\n  }\n}\n","export const enum SpanStatus {\n  /** The operation completed successfully. */\n  Ok = 'ok',\n  /** Deadline expired before operation could complete. */\n  DeadlineExceeded = 'deadline_exceeded',\n  /** 401 Unauthorized (actually does mean unauthenticated according to RFC 7235) */\n  Unauthenticated = 'unauthenticated',\n  /** 403 Forbidden */\n  PermissionDenied = 'permission_denied',\n  /** 404 Not Found. Some requested entity (file or directory) was not found. */\n  NotFound = 'not_found',\n  /** 429 Too Many Requests */\n  ResourceExhausted = 'resource_exhausted',\n  /** Client specified an invalid argument. 4xx. */\n  InvalidArgument = 'invalid_argument',\n  /** 501 Not Implemented */\n  Unimplemented = 'unimplemented',\n  /** 503 Service Unavailable */\n  Unavailable = 'unavailable',\n  /** Other/generic 5xx. */\n  InternalError = 'internal_error',\n  /** Unknown. Any non-standard HTTP status code. */\n  UnknownError = 'unknown_error',\n  /** The operation was cancelled (typically by the user). */\n  Cancelled = 'cancelled',\n  /** Already exists (409) */\n  AlreadyExists = 'already_exists',\n  /** Operation was rejected because the system is not in a state required for the operation's */\n  FailedPrecondition = 'failed_precondition',\n  /** The operation was aborted, typically due to a concurrency issue. */\n  Aborted = 'aborted',\n  /** Operation was attempted past the valid range. */\n  OutOfRange = 'out_of_range',\n  /** Unrecoverable data loss or corruption */\n  DataLoss = 'data_loss'\n}\n\nexport function fromHttpStatus(httpStatus: number) {\n  if (httpStatus < 400) {\n    return SpanStatus.Ok\n  }\n\n  if (httpStatus >= 400 && httpStatus < 500) {\n    switch (httpStatus) {\n      case 401:\n        return SpanStatus.Unauthenticated\n      case 403:\n        return SpanStatus.PermissionDenied\n      case 404:\n        return SpanStatus.NotFound\n      case 409:\n        return SpanStatus.AlreadyExists\n      case 413:\n        return SpanStatus.FailedPrecondition\n      case 429:\n        return SpanStatus.ResourceExhausted\n      default:\n        return SpanStatus.InvalidArgument\n    }\n  }\n\n  if (httpStatus >= 500 && httpStatus < 600) {\n    switch (httpStatus) {\n      case 501:\n        return SpanStatus.Unimplemented\n      case 503:\n        return SpanStatus.Unavailable\n      case 504:\n        return SpanStatus.DeadlineExceeded\n      default:\n        return SpanStatus.InternalError\n    }\n  }\n\n  return SpanStatus.UnknownError\n}\n","import { ReportDataType } from '@mitojs/types'\nimport { BrowserEventTypes, ErrorTypes } from '@mitojs/shared'\nimport { variableTypeDetection } from './is'\nconst allErrorNumber: unknown = {}\n/**\n * generate error unique Id\n * @param data\n */\nexport function createErrorId(data: ReportDataType, apikey: string, maxDuplicateCount: number): number | null {\n  let id: any\n  switch (data.type) {\n    case ErrorTypes.HTTP:\n      id = data.type + data.request.method + data.response.status + getRealPath(data.request.url) + apikey\n      break\n    case ErrorTypes.JAVASCRIPT:\n    case ErrorTypes.VUE:\n    case ErrorTypes.REACT:\n      id = data.type + data.name + data.message + apikey\n      break\n    case ErrorTypes.LOG:\n      id = data.customTag + data.type + data.name + apikey\n      break\n    case ErrorTypes.PROMISE:\n      id = generatePromiseErrorId(data, apikey)\n      break\n    default:\n      id = data.type + data.message + apikey\n      break\n  }\n  id = hashCode(id)\n  if (allErrorNumber[id] >= maxDuplicateCount) {\n    return null\n  }\n  if (typeof allErrorNumber[id] === 'number') {\n    allErrorNumber[id]++\n  } else {\n    allErrorNumber[id] = 1\n  }\n\n  return id\n}\n/**\n * 如果是UNHANDLEDREJECTION，则按照项目主域名来生成\n * 如果是其他的，按照当前页面来生成\n * @param data\n * @param originUrl\n */\nfunction generatePromiseErrorId(data: ReportDataType, apikey: string) {\n  const locationUrl = getRealPath(data.url)\n  if (data.name === BrowserEventTypes.UNHANDLEDREJECTION) {\n    return data.type + objectOrder(data.message) + apikey\n  }\n  return data.type + data.name + objectOrder(data.message) + locationUrl\n}\n\n/**\n * sort object keys\n * ../param reason promise.reject\n */\nfunction objectOrder(reason: any) {\n  const sortFn = (obj: any) => {\n    return Object.keys(obj)\n      .sort()\n      .reduce((total, key) => {\n        if (variableTypeDetection.isObject(obj[key])) {\n          total[key] = sortFn(obj[key])\n        } else {\n          total[key] = obj[key]\n        }\n        return total\n      }, {})\n  }\n  try {\n    if (/\\{.*\\}/.test(reason)) {\n      let obj = JSON.parse(reason)\n      obj = sortFn(obj)\n      return JSON.stringify(obj)\n    }\n  } catch (error) {\n    return reason\n  }\n}\n\n/**\n * http://.../project?id=1#a => http://.../project\n * http://.../id/123=> http://.../id/{param}\n *\n * @param url\n */\nexport function getRealPath(url: string): string {\n  return url.replace(/[\\?#].*$/, '').replace(/\\/\\d+([\\/]*$)/, '{param}$1')\n}\n\n/**\n *\n * @param url\n */\nexport function getFlutterRealOrigin(url: string): string {\n  // for apple\n  return removeHashPath(getFlutterRealPath(url))\n}\n\n/**\n * 获取flutter的原始地址：每个用户的文件夹hash不同\n * @param url\n */\nexport function getFlutterRealPath(url: string): string {\n  // for apple\n  return url.replace(/(\\S+)(\\/Documents\\/)(\\S*)/, `$3`)\n}\n\nexport function removeHashPath(url: string): string {\n  return url.replace(/(\\S+)(\\/#\\/)(\\S*)/, `$1`)\n}\n\nexport function hashCode(str: string): number {\n  let hash = 0\n  if (str.length == 0) return hash\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = (hash << 5) - hash + char\n    hash = hash & hash\n  }\n  return hash\n}\n","import { BREADCRUMBCATEGORYS, WxBreadcrumbTypes, ErrorTypes } from '@mitojs/shared'\nimport { WxParsedErrorType } from '@mitojs/types'\n\n/**\n * 解析字符串错误信息，返回message、name、stack\n * @param str error string\n */\nexport function parseErrorString(str: string): WxParsedErrorType {\n  const splitLine: string[] = str.split('\\n')\n  if (splitLine.length < 2) return null\n  if (splitLine[0].indexOf('MiniProgramError') !== -1) {\n    splitLine.splice(0, 1)\n  }\n  const message = splitLine.splice(0, 1)[0]\n  const name = splitLine.splice(0, 1)[0].split(':')[0]\n  const stack = []\n  splitLine.forEach((errorLine: string) => {\n    const regexpGetFun = /at\\s+([\\S]+)\\s+\\(/ // 获取 [ 函数名 ]\n    const regexGetFile = /\\(([^)]+)\\)/ // 获取 [ 有括号的文件 , 没括号的文件 ]\n    const regexGetFileNoParenthese = /\\s+at\\s+(\\S+)/ // 获取 [ 有括号的文件 , 没括号的文件 ]\n\n    const funcExec = regexpGetFun.exec(errorLine)\n    let fileURLExec = regexGetFile.exec(errorLine)\n    if (!fileURLExec) {\n      // 假如为空尝试解析无括号的URL\n      fileURLExec = regexGetFileNoParenthese.exec(errorLine)\n    }\n\n    const funcNameMatch = Array.isArray(funcExec) && funcExec.length > 0 ? funcExec[1].trim() : ''\n    const fileURLMatch = Array.isArray(fileURLExec) && fileURLExec.length > 0 ? fileURLExec[1] : ''\n    const lineInfo = fileURLMatch.split(':')\n    stack.push({\n      args: [], // 请求参数\n      func: funcNameMatch || ErrorTypes.UNKNOWN_FUNCTION, // 前端分解后的报错\n      column: Number(lineInfo.pop()), // 前端分解后的列\n      line: Number(lineInfo.pop()), // 前端分解后的行\n      url: lineInfo.join(':') // 前端分解后的URL\n    })\n  })\n  return {\n    message,\n    name,\n    stack\n  }\n}\n\nexport function getBreadcrumbCategoryInWx(type: WxBreadcrumbTypes) {\n  switch (type) {\n    case WxBreadcrumbTypes.XHR:\n      return BREADCRUMBCATEGORYS.HTTP\n    case WxBreadcrumbTypes.ROUTE:\n    case WxBreadcrumbTypes.TAP:\n    case WxBreadcrumbTypes.TOUCHMOVE:\n      return BREADCRUMBCATEGORYS.USER\n    case WxBreadcrumbTypes.CUSTOMER:\n    case WxBreadcrumbTypes.CONSOLE:\n      return BREADCRUMBCATEGORYS.DEBUG\n    case WxBreadcrumbTypes.APP_ON_LAUNCH:\n    case WxBreadcrumbTypes.APP_ON_SHOW:\n    case WxBreadcrumbTypes.APP_ON_HIDE:\n    case WxBreadcrumbTypes.PAGE_ON_LOAD:\n    case WxBreadcrumbTypes.PAGE_ON_SHOW:\n    case WxBreadcrumbTypes.PAGE_ON_READY:\n    case WxBreadcrumbTypes.PAGE_ON_HIDE:\n    case WxBreadcrumbTypes.PAGE_ON_SHARE_APP_MESSAGE:\n    case WxBreadcrumbTypes.PAGE_ON_SHARE_TIMELINE:\n    case WxBreadcrumbTypes.PAGE_ON_TAB_ITEM_TAP:\n      return BREADCRUMBCATEGORYS.LIFECYCLE\n    case WxBreadcrumbTypes.UNHANDLEDREJECTION:\n    case WxBreadcrumbTypes.CODE_ERROR:\n    case WxBreadcrumbTypes.RESOURCE:\n    case WxBreadcrumbTypes.VUE:\n    case WxBreadcrumbTypes.REACT:\n    default:\n      return BREADCRUMBCATEGORYS.EXCEPTION\n  }\n}\n\nexport function getAppId() {\n  return wx.getAccountInfoSync().miniProgram.appId\n}\n","import { BREADCRUMBCATEGORYS, BrowserBreadcrumbTypes, BrowserEventTypes, ErrorTypes, globalVar, HttpTypes, HTTP_CODE } from '@mitojs/shared'\nimport {\n  getTimestamp,\n  replaceOld,\n  Severity,\n  _global,\n  getBreadcrumbCategoryInBrowser,\n  variableTypeDetection,\n  on,\n  fromHttpStatus,\n  SpanStatus,\n  getLocationHref,\n  getRealPath\n} from '@mitojs/utils'\nimport { BasePluginType, HttpCollectedType, HttpTransformedType, MITOXMLHttpRequest, voidFun } from '@mitojs/types'\nimport { BrowserClient } from '../browserClient'\n\nconst xhrPlugin: BasePluginType<BrowserEventTypes, BrowserClient> = {\n  name: BrowserEventTypes.XHR,\n  monitor(notify) {\n    monitorXhr.call(this, notify)\n  },\n  transform(collectedData: HttpCollectedType) {\n    return httpTransform(collectedData)\n  },\n  consumer(transformedData: HttpTransformedType) {\n    httpTransformedDataConsumer.call(this, transformedData)\n  }\n}\n\nfunction monitorXhr(this: BrowserClient, notify: (eventName: BrowserEventTypes, data: any) => void) {\n  const { options, transport } = this\n  if (!('XMLHttpRequest' in _global)) {\n    return\n  }\n  const originalXhrProto = XMLHttpRequest.prototype\n  replaceOld(originalXhrProto, 'open', (originalOpen: voidFun): voidFun => {\n    return function (this: MITOXMLHttpRequest, ...args: any[]): void {\n      this.httpCollect = {\n        request: {\n          httpType: HttpTypes.XHR,\n          method: variableTypeDetection.isString(args[0]) ? args[0].toUpperCase() : args[0],\n          url: args[1]\n        },\n        response: {},\n        time: getTimestamp()\n      }\n      originalOpen.apply(this, args)\n    }\n  })\n  replaceOld(originalXhrProto, 'send', (originalSend: voidFun): voidFun => {\n    return function (this: MITOXMLHttpRequest, ...args: any[]): void {\n      const { request } = this.httpCollect\n      const { method, url } = request\n      options.setTraceId(url, (headerFieldName: string, traceId: string) => {\n        request.traceId = traceId\n        this.setRequestHeader(headerFieldName, traceId)\n      })\n      options.beforeAppAjaxSend && options.beforeAppAjaxSend({ method, url }, this)\n      on(this, 'loadend', function (this: MITOXMLHttpRequest) {\n        const isBlock = transport.isSelfDsn(url) || options.isFilterHttpUrl(url)\n        if (isBlock) return\n        const { responseType, response, status } = this\n        request.data = args[0]\n        const eTime = getTimestamp()\n        if (['', 'json', 'text'].indexOf(responseType) !== -1) {\n          this.httpCollect.response.data = typeof response === 'object' ? JSON.stringify(response) : response\n        }\n        this.httpCollect.response.status = status\n        this.httpCollect.elapsedTime = eTime - this.httpCollect.time\n        notify(BrowserEventTypes.XHR, this.httpCollect)\n      })\n      originalSend.apply(this, args)\n    }\n  })\n}\n\nexport function httpTransform(httpCollectedData: HttpCollectedType): HttpTransformedType {\n  let message = ''\n  const {\n    request: { httpType, method, url },\n    response: { status },\n    elapsedTime\n  } = httpCollectedData\n  const name = `${httpType}--${method}`\n  if (status === 0) {\n    message =\n      elapsedTime <= globalVar.crossOriginThreshold ? 'http请求失败，失败原因：跨域限制或域名不存在' : 'http请求失败，失败原因：超时'\n  } else {\n    message = fromHttpStatus(status)\n  }\n  message = message === SpanStatus.Ok ? message : `${message} ${getRealPath(url)}`\n  return {\n    ...httpCollectedData,\n    type: ErrorTypes.HTTP,\n    url: getLocationHref(),\n    level: Severity.Low,\n    message,\n    name\n  }\n}\n\nexport function httpTransformedDataConsumer(this: BrowserClient, transformedData: HttpTransformedType) {\n  const type = transformedData.request.httpType === HttpTypes.FETCH ? BrowserBreadcrumbTypes.FETCH : BrowserBreadcrumbTypes.XHR\n  const {\n    response: { status },\n    time\n  } = transformedData\n  const isError = status === 0 || status === HTTP_CODE.BAD_REQUEST || status > HTTP_CODE.UNAUTHORIZED\n  this.breadcrumb.push({\n    type,\n    category: getBreadcrumbCategoryInBrowser(type),\n    data: { ...transformedData },\n    level: Severity.Info,\n    time\n  })\n  if (isError) {\n    this.breadcrumb.push({\n      type,\n      category: BREADCRUMBCATEGORYS.EXCEPTION,\n      data: { ...transformedData },\n      level: Severity.Error,\n      time\n    })\n    this.transport.send(transformedData, this.breadcrumb.getStack())\n  }\n}\n\nexport default xhrPlugin\n","import { getBreadcrumbCategoryInWx, setUrlQuery, Severity, variableTypeDetection } from '@mitojs/utils'\nimport { DeviceInfo } from '@mitojs/types'\nimport { WxClient } from './wxClient'\nimport { WxBreadcrumbTypes } from 'packages/shared/src/wx'\n\n/**\n * 后退时需要计算当前页面地址\n * @param delta 返回的页面数，如果 delta 大于现有页面数，则返回到首页\n */\nexport function getNavigateBackTargetUrl(delta: number | undefined) {\n  if (!variableTypeDetection.isFunction(getCurrentPages)) {\n    return ''\n  }\n  const pages = getCurrentPages() // 在App里调用该方法，页面还没有生成，长度为0\n  if (!pages.length) {\n    return 'App'\n  }\n  delta = delta || 1\n  const toPage = pages[pages.length - delta]\n  return setUrlQuery(toPage.route, toPage.options)\n}\n\n/**\n * 获取wx的pages的pop\n *\n * @export\n * @return {*}\n */\nexport function getCurrentPagesPop() {\n  return getCurrentPages().pop()\n}\n\n/**\n * 返回包含id、data字符串的标签\n * @param e wx BaseEvent\n */\nexport function targetAsString(e: WechatMiniprogram.BaseEvent): string {\n  const id = e.currentTarget?.id ? ` id=\"${e.currentTarget?.id}\"` : ''\n  const dataSets = Object.keys(e.currentTarget.dataset).map((key) => {\n    return `data-${key}=${e.currentTarget.dataset[key]}`\n  })\n  return `<element ${id} ${dataSets.join(' ')}/>`\n}\n\nexport async function getWxMiniDeviceInfo(): Promise<DeviceInfo> {\n  const { pixelRatio, screenHeight, screenWidth } = wx.getSystemInfoSync()\n  const netType = await getWxMiniNetWrokType()\n  return {\n    ratio: pixelRatio,\n    clientHeight: screenHeight,\n    clientWidth: screenWidth,\n    netType\n  }\n}\n\nexport async function getWxMiniNetWrokType(): Promise<string> {\n  return new Promise((resolve) => {\n    wx.getNetworkType({\n      success(res) {\n        resolve(res.networkType)\n      },\n      fail(err) {\n        console.error(`获取微信小程序网络类型失败:${err}`)\n        resolve('getNetWrokType failed')\n      }\n    })\n  })\n}\n\nexport function addBreadcrumbInWx(this: WxClient, data: any, type: WxBreadcrumbTypes, level = Severity.Info) {\n  return this.breadcrumb.push({\n    type,\n    data,\n    category: getBreadcrumbCategoryInWx(type),\n    level\n  })\n}\n","import { ErrorTypes, WxAppEvents, WxBreadcrumbTypes, WxEventTypes } from '@mitojs/shared'\nimport { BasePluginType, ReportDataType, voidFun } from '@mitojs/types'\nimport {\n  extractErrorStack,\n  getCurrentRoute,\n  getTimestamp,\n  isError,\n  parseErrorString,\n  replaceOld,\n  Severity,\n  unknownToString\n} from '@mitojs/utils'\nimport { WxLifeCycleBreadcrumb } from '../types'\nimport { addBreadcrumbInWx } from '../utils'\nimport { WxClient } from '../wxClient'\n\ntype WxAppPluginMapType = Map<WxAppEvents, Partial<BasePluginType<WxEventTypes, WxClient>>>\n\nconst wxAppPluginMap: WxAppPluginMapType = new Map()\nwxAppPluginMap.set(WxAppEvents.AppOnLaunch, {\n  transform(options: WechatMiniprogram.App.LaunchShowOption) {\n    const { options: sdkOptions } = this\n    sdkOptions.appOnLaunch(options)\n    const data: WxLifeCycleBreadcrumb = {\n      path: options.path,\n      query: options.query\n    }\n    return data\n  },\n  consumer(data: WxLifeCycleBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.APP_ON_LAUNCH)\n  }\n})\n\nwxAppPluginMap.set(WxAppEvents.AppOnShow, {\n  transform(options: WechatMiniprogram.App.LaunchShowOption) {\n    const { options: sdkOptions } = this\n    sdkOptions.appOnShow(options)\n    const data: WxLifeCycleBreadcrumb = {\n      path: options.path,\n      query: options.query\n    }\n    return data\n  },\n  consumer(data: WxLifeCycleBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.APP_ON_SHOW)\n  }\n})\n\nwxAppPluginMap.set(WxAppEvents.AppOnHide, {\n  transform() {\n    const { options: sdkOptions } = this\n    sdkOptions.appOnHide()\n  },\n  consumer() {\n    addBreadcrumbInWx.call(this, null, WxBreadcrumbTypes.APP_ON_HIDE)\n  }\n})\n\nwxAppPluginMap.set(WxAppEvents.AppOnError, {\n  transform(error: string) {\n    const parsedError = parseErrorString(error)\n    const data: ReportDataType = {\n      ...parsedError,\n      time: getTimestamp(),\n      level: Severity.Normal,\n      url: getCurrentRoute(),\n      type: ErrorTypes.JAVASCRIPT\n    }\n    return data\n  },\n  consumer(transformedData: ReportDataType) {\n    const breadcrumbStack = addBreadcrumbInWx.call(this, transformedData, WxBreadcrumbTypes.CODE_ERROR, Severity.Error)\n    this.transport.send(transformedData, breadcrumbStack)\n  }\n})\n\nwxAppPluginMap.set(WxAppEvents.AppOnPageNotFound, {\n  transform(data: WechatMiniprogram.OnPageNotFoundCallbackResult) {\n    const { options: sdkOptions } = this\n    sdkOptions.onPageNotFound(data)\n    return data\n  },\n  consumer(data: WechatMiniprogram.OnPageNotFoundCallbackResult) {\n    // 不发送，因为会被其他AppOnUnhandledRejection捕捉到\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.ROUTE, Severity.Error)\n  }\n})\n\nwxAppPluginMap.set(WxAppEvents.AppOnUnhandledRejection, {\n  transform(ev: WechatMiniprogram.OnUnhandledRejectionCallbackResult) {\n    let data: ReportDataType = {\n      type: ErrorTypes.PROMISE,\n      message: unknownToString(ev.reason),\n      url: getCurrentRoute(),\n      name: 'unhandledrejection', // 小程序当初onUnhandledRejection回调中无type参数，故写死\n      time: getTimestamp(),\n      level: Severity.Low\n    }\n    if (isError(ev.reason)) {\n      data = {\n        ...data,\n        ...extractErrorStack(ev.reason, Severity.Low),\n        url: getCurrentRoute()\n      }\n    }\n    return data\n  },\n  consumer(transformedData: ReportDataType) {\n    const breadcrumbStack = addBreadcrumbInWx.call(this, transformedData, WxBreadcrumbTypes.UNHANDLEDREJECTION, Severity.Error)\n    this.transport.send(transformedData, breadcrumbStack)\n  }\n})\n\nfunction getWxAppPlugins() {\n  if (!App) return []\n  const methodHooks = Object.values(WxAppEvents)\n  const plugins = methodHooks.map((method) => {\n    return {\n      name: method,\n      monitor: function (notify) {\n        const originApp = App\n        App = function (appOptions: WechatMiniprogram.App.Option) {\n          replaceOld(\n            appOptions,\n            method.replace('AppOn', 'on'),\n            function (originMethod: voidFun) {\n              return function (...args: any): void {\n                // 让原本的函数比抛出的hooks先执行，便于埋点判断是否重复\n                if (originMethod) {\n                  originMethod.apply(this, args)\n                }\n                notify.apply(null, [method, ...args])\n              }\n            },\n            true\n          )\n          return originApp(appOptions)\n        } as WechatMiniprogram.App.Constructor\n      }\n    }\n  }) as BasePluginType<WxAppEvents, WxClient>[]\n  return plugins.map((item) => {\n    return {\n      ...item,\n      ...(wxAppPluginMap.has(item.name) ? wxAppPluginMap.get(item.name) : {})\n    }\n  })\n}\n\nconst wxAppPlugins = getWxAppPlugins()\nexport { wxAppPluginMap }\nexport default wxAppPlugins\n","import { WxEventTypes, globalVar, WxBreadcrumbTypes, WxBaseEventTypes } from '@mitojs/shared'\nimport { replaceOld, Severity, variableTypeDetection } from '@mitojs/utils'\nimport { BasePluginType, ConsoleCollectType } from '@mitojs/types'\nimport { WxClient } from '../wxClient'\nimport { addBreadcrumbInWx } from '../utils'\nconst wxConsolePlugin: BasePluginType<WxEventTypes, WxClient> = {\n  name: WxBaseEventTypes.CONSOLE,\n  monitor(notify) {\n    if (console && variableTypeDetection.isObject(console)) {\n      const logType = ['log', 'debug', 'info', 'warn', 'error', 'assert']\n      logType.forEach(function (level: string): void {\n        if (!(level in console)) return\n        replaceOld(console, level, function (originalConsole): Function {\n          return function (...args: any[]): void {\n            if (originalConsole) {\n              notify(WxBaseEventTypes.CONSOLE, { args, level })\n              originalConsole.apply(console, args)\n            }\n          }\n        })\n      })\n    }\n  },\n  transform(collectedData: ConsoleCollectType) {\n    return collectedData\n  },\n  consumer(transformedData: ConsoleCollectType) {\n    if (globalVar.isLogAddBreadcrumb) {\n      addBreadcrumbInWx.call(this, transformedData, WxBreadcrumbTypes.CONSOLE, Severity.fromString(transformedData.level))\n    }\n  }\n}\n\nexport default wxConsolePlugin\n","import { WxPageEvents, WxBreadcrumbTypes, WxEventTypes } from '@mitojs/shared'\nimport { BasePluginType, voidFun } from '@mitojs/types'\nimport { firstStrtoLowerCase, isEmptyObject, replaceOld } from '@mitojs/utils'\nimport { WxLifeCycleBreadcrumb, WxOnShareAppMessageBreadcrumb, WxOnTabItemTapBreadcrumb } from '../types'\nimport { addBreadcrumbInWx, getCurrentPagesPop } from '../utils'\nimport { WxClient } from '../wxClient'\n\ntype WxPagePluginMapType = Map<WxPageEvents, Partial<BasePluginType<WxEventTypes, WxClient>>>\n\nfunction pageHookTransform(this: WxClient, hook: WxPageEvents) {\n  const page = getCurrentPagesPop()\n  const { options: sdkOptions } = this\n  if (page) {\n    sdkOptions[firstStrtoLowerCase(hook)](page)\n    return {\n      path: page.route,\n      query: page.options\n    }\n  }\n  sdkOptions[firstStrtoLowerCase(hook)]()\n}\n\nconst wxPagePluginMap: WxPagePluginMapType = new Map()\nwxPagePluginMap.set(WxPageEvents.PageOnLoad, {\n  transform() {\n    // getCurrentPagesPop is undefined\n    return pageHookTransform.call(this, WxPageEvents.PageOnLoad)\n  },\n  consumer(data: WxLifeCycleBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_LOAD)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnShow, {\n  transform() {\n    return pageHookTransform.call(this, WxPageEvents.PageOnShow)\n  },\n  consumer(data: WxLifeCycleBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_SHOW)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnReady, {\n  transform() {\n    return pageHookTransform.call(this, WxPageEvents.PageOnReady)\n  },\n  consumer() {\n    addBreadcrumbInWx.call(this, null, WxBreadcrumbTypes.PAGE_ON_READY)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnHide, {\n  transform() {\n    return pageHookTransform.call(this, WxPageEvents.PageOnHide)\n  },\n  consumer(data: WxLifeCycleBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_HIDE)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnUnload, {\n  transform() {\n    return pageHookTransform.call(this, WxPageEvents.PageOnHide)\n  },\n  consumer(data: WxLifeCycleBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_UNLOAD)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnShareTimeline, {\n  transform() {\n    return pageHookTransform.call(this, WxPageEvents.PageOnHide)\n  },\n  consumer(data: WxOnShareAppMessageBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_SHARE_TIMELINE)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnShareAppMessage, {\n  transform(options: WechatMiniprogram.Page.IShareAppMessageOption) {\n    const page = getCurrentPages().pop()\n    const { options: sdkOptions } = this\n    sdkOptions.onShareAppMessage({\n      ...page,\n      ...options\n    })\n    const data: WxOnShareAppMessageBreadcrumb = {\n      path: page.route,\n      query: page.options,\n      options\n    }\n    return data\n  },\n  consumer(data: WxOnShareAppMessageBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_SHARE_APP_MESSAGE)\n  }\n})\n\nwxPagePluginMap.set(WxPageEvents.PageOnTabItemTap, {\n  transform(options: WechatMiniprogram.Page.ITabItemTapOption) {\n    const page = getCurrentPages().pop()\n    const { options: sdkOptions } = this\n    sdkOptions.onShareAppMessage({\n      ...page,\n      ...options\n    })\n    const data: WxOnTabItemTapBreadcrumb = {\n      path: page.route,\n      query: page.options,\n      options\n    }\n    return data\n  },\n  consumer(data: WxOnTabItemTapBreadcrumb) {\n    addBreadcrumbInWx.call(this, data, WxBreadcrumbTypes.PAGE_ON_TAB_ITEM_TAP)\n  }\n})\n\nfunction getWxPagePlugins() {\n  if (!Page) return []\n  const pageHooks = Object.values(WxPageEvents)\n  const plugins = pageHooks.map((hook) => {\n    return {\n      name: hook,\n      monitor: function (notify) {\n        function monitorPageHookWithOptions(\n          options:\n            | WechatMiniprogram.Page.Options<WechatMiniprogram.Page.DataOption, WechatMiniprogram.Page.CustomOption>\n            | WechatMiniprogram.Component.MethodOption\n        ) {\n          replaceOld(\n            options,\n            hook.replace('PageOn', 'on'),\n            function (originMethod: voidFun) {\n              return function (...args: any): void {\n                notify.apply(null, [hook, ...args])\n                if (originMethod) {\n                  return originMethod.apply(this, args)\n                }\n              }\n            },\n            true\n          )\n        }\n        invokeCallbackInReplacePage((pageOptions) => {\n          monitorPageHookWithOptions(pageOptions)\n        })\n        invokeCallbackInReplaceComponent((componentOptions) => {\n          monitorPageHookWithOptions(componentOptions)\n        })\n      }\n    }\n  }) as BasePluginType<WxPageEvents, WxClient>[]\n  return plugins.map((item) => {\n    return {\n      ...item,\n      ...(wxPagePluginMap.has(item.name) ? wxPagePluginMap.get(item.name) : {})\n    }\n  })\n}\n\nexport function invokeCallbackInReplacePage(\n  callback: (\n    pageOptions:\n      | WechatMiniprogram.Page.Options<WechatMiniprogram.Page.DataOption, WechatMiniprogram.Page.CustomOption>\n      | WechatMiniprogram.Component.MethodOption\n  ) => void\n) {\n  const originPage = Page\n  Page = function (pageOptions) {\n    callback(pageOptions)\n    return originPage(pageOptions)\n  }\n}\n\n// 重写Component\nexport function invokeCallbackInReplaceComponent(\n  callback: (\n    pageOptions:\n      | WechatMiniprogram.Page.Options<WechatMiniprogram.Page.DataOption, WechatMiniprogram.Page.CustomOption>\n      | WechatMiniprogram.Component.MethodOption\n  ) => void\n) {\n  if (!Component) {\n    return\n  }\n  const originComponent = Component\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  Component = function (componentOptions): WechatMiniprogram.Component.Constructor {\n    if (!isEmptyObject(componentOptions.methods)) {\n      /*\n       * 兼容用Component构造页面的上报\n       * 当用Component构造页面时，页面的生命周期函数应写在methods定义段中，所以重写componentOptions.methods中的对应周期函数\n       */\n      callback(componentOptions.methods)\n    }\n    return originComponent.call(this, componentOptions)\n  }\n}\n\nconst wxPagePlugins = getWxPagePlugins()\nexport { wxPagePluginMap }\nexport default wxPagePlugins\n","import { LinstenerTypes, WxBaseEventTypes, WxBreadcrumbTypes } from '@mitojs/shared'\nimport { BasePluginType } from '@mitojs/types'\nimport { isEmptyObject, replaceOld, throttle } from '@mitojs/utils'\nimport { addBreadcrumbInWx, targetAsString } from '../utils'\nimport { WxClient } from '../wxClient'\nimport { invokeCallbackInReplaceComponent, invokeCallbackInReplacePage } from './wxPage'\n\nconst wxDomPlugin: BasePluginType<WxBaseEventTypes, WxClient> = {\n  name: WxBaseEventTypes.DOM,\n  monitor(notify) {\n    const { options: sdkOptions } = this\n    function monitorDomWithOption(\n      options:\n        | WechatMiniprogram.Page.Options<WechatMiniprogram.Page.DataOption, WechatMiniprogram.Page.CustomOption>\n        | WechatMiniprogram.Component.MethodOption\n    ) {\n      function gestureTrigger(e) {\n        e.mitoWorked = true // 给事件对象增加特殊的标记，避免被无限透传\n        notify(WxBaseEventTypes.DOM, e)\n      }\n      const throttleGesturetrigger = throttle(gestureTrigger, sdkOptions.throttleDelayTime)\n      const linstenerTypes = [LinstenerTypes.Touchmove, LinstenerTypes.Tap]\n      if (options) {\n        Object.keys(options).forEach((m) => {\n          if ('function' !== typeof options[m]) {\n            return\n          }\n          replaceOld(\n            options,\n            m,\n            function (originMethod: (args: any) => void) {\n              return function (...args: any): void {\n                const e = args[0]\n                if (e && e.type && e.currentTarget && !e.mitoWorked) {\n                  if (linstenerTypes.indexOf(e.type) > -1) {\n                    throttleGesturetrigger(e)\n                  }\n                }\n                return originMethod.apply(this, args)\n              }\n            },\n            true\n          )\n        })\n      }\n    }\n    invokeCallbackInReplacePage((pageOptions) => {\n      monitorDomWithOption(pageOptions)\n    })\n    invokeCallbackInReplaceBehavior((options) => {\n      monitorDomWithOption(options)\n    })\n    invokeCallbackInReplaceComponent((componentOptions) => {\n      monitorDomWithOption(componentOptions)\n    })\n  },\n  transform(e: WechatMiniprogram.BaseEvent) {\n    const { options: sdkOptions } = this\n    sdkOptions.triggerWxEvent(e)\n    let type = WxBreadcrumbTypes.TOUCHMOVE\n    if (e.type === LinstenerTypes.Tap) {\n      type = WxBreadcrumbTypes.TAP\n    }\n    const data = targetAsString(e)\n    return { data, type }\n  },\n  consumer({ data, type }: { data: string; type: WxBreadcrumbTypes }) {\n    addBreadcrumbInWx.call(this, data, type)\n  }\n}\n\nfunction invokeCallbackInReplaceBehavior(callback: (options: any) => void) {\n  if (!Behavior) {\n    return\n  }\n  const originBehavior = Behavior\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  Behavior = function (behaviorOptions): WechatMiniprogram.Behavior.Constructor {\n    if (!isEmptyObject(behaviorOptions.methods)) {\n      /*\n       * 当使用Compnent直接构造页面时，用到的behavior中如果有onShow等页面生命周期函数是不会被触发的，所以只用监听手势行为\n       */\n      callback(behaviorOptions.methods)\n    }\n    return originBehavior.call(this, behaviorOptions)\n  }\n}\n\nexport default wxDomPlugin\n","import { ErrorTypes, WxBaseEventTypes, WxBreadcrumbTypes, WxEventTypes, WxRouteEvents } from '@mitojs/shared'\nimport { getCurrentRoute, Severity, variableTypeDetection } from '@mitojs/utils'\nimport { BasePluginType, ReportDataType } from '@mitojs/types'\nimport { addBreadcrumbInWx, getNavigateBackTargetUrl } from '../utils'\nimport { WxClient } from '../wxClient'\nimport { WxRouteCollectType } from '../types'\n\ninterface WxRouteTransformType {\n  data: ReportDataType\n  collectedData: WxRouteCollectType\n}\n\nconst wxRoutePlugin: BasePluginType<WxEventTypes, WxClient> = {\n  name: WxBaseEventTypes.MINI_ROUTE,\n  monitor(notify) {\n    monitorWxRoute.call(this, notify)\n  },\n  transform(collectedData: WxRouteCollectType): WxRouteTransformType {\n    const reportData: ReportDataType = {\n      type: ErrorTypes.ROUTE,\n      message: collectedData.message,\n      url: collectedData.to,\n      name: 'MINI_' + ErrorTypes.ROUTE,\n      level: Severity.Error\n    }\n    return {\n      data: reportData,\n      collectedData\n    }\n  },\n  consumer(transformedData: WxRouteTransformType) {\n    const { data, collectedData } = transformedData\n    if (collectedData.isFail) {\n      const breadcrumbStack = addBreadcrumbInWx.call(this, collectedData, WxBreadcrumbTypes.CODE_ERROR, Severity.Error)\n      return this.transport.send(data, breadcrumbStack)\n    }\n    addBreadcrumbInWx.call(this, collectedData, WxBreadcrumbTypes.ROUTE)\n  }\n}\n\nexport function monitorWxRoute(this: WxClient, notify: (eventName: WxBaseEventTypes, data: any) => void) {\n  const { options: wxOptions } = this\n  const methods = [\n    WxRouteEvents.SwitchTab,\n    WxRouteEvents.ReLaunch,\n    WxRouteEvents.RedirectTo,\n    WxRouteEvents.NavigateTo,\n    WxRouteEvents.NavigateBack,\n    WxRouteEvents.NavigateToMiniProgram\n  ]\n  methods.forEach((method) => {\n    const originMethod = wx[method] as Function\n    Object.defineProperty(wx, method, {\n      writable: true,\n      enumerable: true,\n      configurable: true,\n      value: function (\n        options:\n          | WechatMiniprogram.SwitchTabOption\n          | WechatMiniprogram.ReLaunchOption\n          | WechatMiniprogram.RedirectToOption\n          | WechatMiniprogram.NavigateToOption\n          | WechatMiniprogram.NavigateBackOption\n          | WechatMiniprogram.NavigateToMiniProgramOption\n      ) {\n        let toUrl\n        if (method === WxRouteEvents.NavigateBack) {\n          toUrl = getNavigateBackTargetUrl((options as WechatMiniprogram.NavigateBackOption)?.delta)\n        } else {\n          toUrl = (options as WechatMiniprogram.SwitchTabOption).url\n        }\n        const data = {\n          from: getCurrentRoute(),\n          to: toUrl\n        }\n        notify(WxBaseEventTypes.MINI_ROUTE, data)\n        // 如果complete||success||fail一个都没有，则原方法返回promise，此时sdk也不需要处理\n        if (\n          variableTypeDetection.isFunction(options.complete) ||\n          variableTypeDetection.isFunction(options.success) ||\n          variableTypeDetection.isFunction(options.fail)\n        ) {\n          const _fail = options.fail\n          const failHandler:\n            | WechatMiniprogram.SwitchTabFailCallback\n            | WechatMiniprogram.ReLaunchFailCallback\n            | WechatMiniprogram.RedirectToFailCallback\n            | WechatMiniprogram.NavigateToFailCallback\n            | WechatMiniprogram.NavigateBackFailCallback = function (res) {\n            const failData: WxRouteCollectType = {\n              ...data,\n              isFail: true,\n              message: res.errMsg\n            }\n            notify(WxBaseEventTypes.MINI_ROUTE, failData)\n            if (variableTypeDetection.isFunction(_fail)) {\n              return _fail(res)\n            }\n          }\n          options.fail = failHandler\n        }\n        if (method === WxRouteEvents.NavigateToMiniProgram && variableTypeDetection.isFunction(wxOptions.wxNavigateToMiniProgram)) {\n          options = wxOptions.wxNavigateToMiniProgram(options)\n        }\n        return originMethod.call(this, options)\n      }\n    })\n  })\n}\n\nexport default wxRoutePlugin\n","import { ToStringTypes } from '@mitojs/shared'\nimport { logger, getTimestamp, silentConsoleScope, toStringValidateOption } from '@mitojs/utils'\nimport { BaseOptionsFieldsIntegrationType, BreadcrumbPushData } from '@mitojs/types'\n\n/**\n * 用户行为栈存储，实体类\n *\n * @export\n * @class Breadcrumb\n * @template O\n */\nexport class Breadcrumb<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> {\n  maxBreadcrumbs = 10\n  beforePushBreadcrumb: unknown = null\n  stack: BreadcrumbPushData[] = []\n  constructor(options: Partial<O> = {}) {\n    this.bindOptions(options)\n  }\n  /**\n   * 添加用户行为栈\n   *\n   * @param {BreadcrumbPushData} data\n   * @memberof Breadcrumb\n   */\n  push(data: BreadcrumbPushData): BreadcrumbPushData[] {\n    if (typeof this.beforePushBreadcrumb === 'function') {\n      let result: BreadcrumbPushData = null\n      // 如果用户输入console，并且logger是打开的会造成无限递归，\n      // 加入一个开关，执行这个函数前，把监听console的行为关掉\n      const beforePushBreadcrumb = this.beforePushBreadcrumb\n      silentConsoleScope(() => {\n        result = beforePushBreadcrumb.call(this, this, data)\n      })\n      if (!result) return this.stack\n      return this.immediatePush(result)\n    }\n    return this.immediatePush(data)\n  }\n\n  immediatePush(data: BreadcrumbPushData): BreadcrumbPushData[] {\n    data.time || (data.time = getTimestamp())\n    if (this.stack.length >= this.maxBreadcrumbs) {\n      this.shift()\n    }\n    this.stack.push(data)\n    // make sure xhr fetch is behind button click\n    this.stack.sort((a, b) => a.time - b.time)\n    logger.log(this.stack)\n    return this.stack\n  }\n\n  shift(): boolean {\n    return this.stack.shift() !== undefined\n  }\n\n  clear(): void {\n    this.stack = []\n  }\n\n  getStack(): BreadcrumbPushData[] {\n    return this.stack\n  }\n\n  bindOptions(options: Partial<O> = {}): void {\n    const { maxBreadcrumbs, beforePushBreadcrumb } = options\n    toStringValidateOption(maxBreadcrumbs, 'maxBreadcrumbs', ToStringTypes.Number) && (this.maxBreadcrumbs = maxBreadcrumbs)\n    toStringValidateOption(beforePushBreadcrumb, 'beforePushBreadcrumb', ToStringTypes.Function) &&\n      (this.beforePushBreadcrumb = beforePushBreadcrumb)\n  }\n}\n","import { getFunctionName, logger, nativeTryCatch } from '@mitojs/utils'\n\ntype MonitorCallback = (data: any) => void\n/**\n * 发布订阅类\n *\n * @export\n * @class Subscrib\n * @template T 事件枚举\n */\nexport class Subscrib<T> {\n  dep: Map<T, MonitorCallback[]> = new Map()\n  constructor() {}\n  watch(eventName: T, callBack: (data: any) => any) {\n    const fns = this.dep.get(eventName)\n    if (fns) {\n      this.dep.set(eventName, fns.concat(callBack))\n      return\n    }\n    this.dep.set(eventName, [callBack])\n  }\n  notify<D = any>(eventName: T, data: D) {\n    const fns = this.dep.get(eventName)\n    if (!eventName || !fns) return\n    fns.forEach((fn) => {\n      nativeTryCatch(\n        () => {\n          fn(data)\n        },\n        (e: Error) => {\n          logger.error(`Subscrib.notify：监听事件的回调函数发生错误\\neventName:${eventName}\\nName: ${getFunctionName(fn)}\\nError: ${e}`)\n        }\n      )\n    })\n  }\n}\n","import { EventTypes, SDK_VERSION } from '@mitojs/shared'\nimport { BaseClientType, BaseOptionsFieldsIntegrationType, BasePluginType, LogTypes } from '@mitojs/types'\nimport { logger } from '@mitojs/utils'\nimport { Subscrib } from './subscribe'\n\n/**\n * 抽象客户端，已实现插件和钩子函数的定义\n * 如果目前的钩子函数满足不了业务，需要在use中额外添加钩子，并在各个端实现\n *\n * @export\n * @abstract\n * @class BaseClient\n * @implements {BaseClientType}\n * @template O\n * @template E\n */\nexport abstract class BaseClient<O extends BaseOptionsFieldsIntegrationType, E extends EventTypes> implements BaseClientType {\n  SDK_NAME: string\n  SDK_VERSION = SDK_VERSION\n  options: BaseOptionsFieldsIntegrationType\n  constructor(options: O) {\n    this.options = options\n    logger.bindOptions(options.debug)\n  }\n\n  /**\n   * 引用插件\n   *\n   * @param {BasePluginType<E>[]} plugins\n   * @memberof BaseClient\n   */\n  use(plugins: BasePluginType<E>[]) {\n    const subscrib = new Subscrib<E>()\n    plugins.forEach((item) => {\n      if (!this.isPluginEnable(item.name)) return\n      item.monitor.call(this, subscrib.notify.bind(subscrib))\n      const wrapperTranform = (...args: any[]) => {\n        const res = item.transform?.apply(this, args)\n        item.consumer?.call(this, res)\n      }\n      subscrib.watch(item.name, wrapperTranform)\n    })\n  }\n  getOptions() {\n    return this.options\n  }\n\n  /**\n   * 判断当前插件是否启用，每个端的可选字段不同，需要子类实现\n   *\n   * @abstract\n   * @param {EventTypes} name\n   * @return {*}  {boolean}\n   * @memberof BaseClient\n   */\n  abstract isPluginEnable(name: EventTypes): boolean\n\n  /**\n   * 手动上报方法，每个端需要自己实现\n   *\n   * @abstract\n   * @param {LogTypes} data\n   * @memberof BaseClient\n   */\n  abstract log(data: LogTypes): void\n}\n","import { ToStringTypes } from '@mitojs/shared'\nimport { BaseOptionsFieldsIntegrationType, BaseOptionsType } from '@mitojs/types'\nimport { generateUUID, toStringValidateOption } from '@mitojs/utils'\n\n/**\n * 公用的基础配置项绑定\n *\n * @export\n * @class BaseOptions\n * @implements {BaseOptionsType<O>}\n * @template O\n */\nexport class BaseOptions<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> implements BaseOptionsType<O> {\n  enableTraceId = false\n  filterXhrUrlRegExp: RegExp\n  includeHttpUrlTraceIdRegExp = /.*/\n  traceIdFieldName = 'Trace-Id'\n  throttleDelayTime = 0\n  maxDuplicateCount = 5\n  beforeAppAjaxSend = null\n  constructor() {}\n  bindOptions(options: O) {\n    const { enableTraceId, filterXhrUrlRegExp, traceIdFieldName, throttleDelayTime, includeHttpUrlTraceIdRegExp, beforeAppAjaxSend } =\n      options\n    toStringValidateOption(enableTraceId, 'enableTraceId', ToStringTypes.Boolean) && (this.enableTraceId = enableTraceId)\n    toStringValidateOption(traceIdFieldName, 'traceIdFieldName', ToStringTypes.String) && (this.traceIdFieldName = traceIdFieldName)\n    toStringValidateOption(throttleDelayTime, 'throttleDelayTime', ToStringTypes.Number) && (this.throttleDelayTime = throttleDelayTime)\n    toStringValidateOption(filterXhrUrlRegExp, 'filterXhrUrlRegExp', ToStringTypes.RegExp) && (this.filterXhrUrlRegExp = filterXhrUrlRegExp)\n    toStringValidateOption(includeHttpUrlTraceIdRegExp, 'includeHttpUrlTraceIdRegExp', ToStringTypes.RegExp) &&\n      (this.includeHttpUrlTraceIdRegExp = includeHttpUrlTraceIdRegExp)\n    toStringValidateOption(beforeAppAjaxSend, 'beforeAppAjaxSend', ToStringTypes.Function) && (this.beforeAppAjaxSend = beforeAppAjaxSend)\n  }\n  isFilterHttpUrl(url: string): boolean {\n    return this.filterXhrUrlRegExp && this.filterXhrUrlRegExp.test(url)\n  }\n  setTraceId(httpUrl: string, callback: (headerFieldName: string, traceId: string) => void) {\n    const { includeHttpUrlTraceIdRegExp, enableTraceId } = this\n    if (enableTraceId && includeHttpUrlTraceIdRegExp && includeHttpUrlTraceIdRegExp.test(httpUrl)) {\n      const traceId = generateUUID()\n      callback(this.traceIdFieldName, traceId)\n    }\n  }\n}\n","import { logger, Queue, isInclude, toStringValidateOption, createErrorId, isEmpty } from '@mitojs/utils'\nimport { SDK_NAME, SDK_VERSION, ToStringTypes } from '@mitojs/shared'\nimport { AuthInfo, BaseOptionsFieldsIntegrationType, BreadcrumbPushData, ReportDataType, TransportDataType } from '@mitojs/types'\n\n/**\n * 传输数据抽象类\n *\n * @export\n * @abstract\n * @class BaseTransport\n * @template O\n */\nexport abstract class BaseTransport<O extends BaseOptionsFieldsIntegrationType = BaseOptionsFieldsIntegrationType> {\n  apikey = ''\n  dsn = ''\n  queue: Queue\n  beforeDataReport: Promise<TransportDataType | null | undefined | boolean> | TransportDataType | any | null | undefined | boolean = null\n  backTrackerId: unknown = null\n  configReportUrl: unknown = null\n  maxDuplicateCount = 3\n  constructor() {\n    this.queue = new Queue()\n  }\n\n  /**\n   * 获取当前SDK信息\n   *\n   * @return {*}  {AuthInfo}\n   * @memberof BaseTransport\n   */\n  getAuthInfo(): AuthInfo {\n    const trackerId = this.getTrackerId()\n    const result: AuthInfo = {\n      trackerId: String(trackerId),\n      sdkVersion: SDK_VERSION,\n      sdkName: SDK_NAME,\n      apikey: this.apikey\n    }\n    return result\n  }\n\n  /**\n   * 获取hooks中返回的trackId，没有就返回''\n   *\n   * @return {*}  {(string | number)}\n   * @memberof BaseTransport\n   */\n  getTrackerId(): string | number {\n    if (typeof this.backTrackerId === 'function') {\n      const trackerId = this.backTrackerId()\n      if (typeof trackerId === 'string' || typeof trackerId === 'number') {\n        return trackerId\n      } else {\n        logger.error(`trackerId:${trackerId} 期望 string 或 number 类型，但是传入 ${typeof trackerId}`)\n      }\n    }\n    return ''\n  }\n\n  /**\n   * 判断当前url是不是你配置的dsn\n   *\n   * @param {string} targetUrl\n   * @return {*}  {boolean}\n   * @memberof BaseTransport\n   */\n  isSelfDsn(targetUrl: string): boolean {\n    return this.dsn && isInclude(targetUrl, this.dsn)\n  }\n\n  /**\n   * 绑定配置项\n   *\n   * @param {Partial<O>} [options={}]\n   * @memberof BaseTransport\n   */\n  bindOptions(options: Partial<O> = {}): void {\n    const { dsn, beforeDataReport, apikey, maxDuplicateCount, backTrackerId, configReportUrl } = options\n    toStringValidateOption(apikey, 'apikey', ToStringTypes.String) && (this.apikey = apikey)\n    toStringValidateOption(dsn, 'dsn', ToStringTypes.String) && (this.dsn = dsn)\n    toStringValidateOption(maxDuplicateCount, 'maxDuplicateCount', ToStringTypes.Number) && (this.maxDuplicateCount = maxDuplicateCount)\n    toStringValidateOption(beforeDataReport, 'beforeDataReport', ToStringTypes.Function) && (this.beforeDataReport = beforeDataReport)\n    toStringValidateOption(backTrackerId, 'backTrackerId', ToStringTypes.Function) && (this.backTrackerId = backTrackerId)\n    toStringValidateOption(configReportUrl, 'configReportUrl', ToStringTypes.Function) && (this.configReportUrl = configReportUrl)\n  }\n\n  /**\n   * 发送数据到服务端\n   *\n   * @param {*} data\n   * @param {BreadcrumbPushData[]} breadcrumb\n   * @return {*}\n   * @memberof BaseTransport\n   */\n  async send(data: any, breadcrumb: BreadcrumbPushData[]): Promise<void> {\n    const errorId = createErrorId(data, this.apikey, this.maxDuplicateCount)\n    if (!errorId) return\n    data.errorId = errorId\n    let transportData = {\n      ...this.getTransportData(data),\n      breadcrumb\n    }\n    if (typeof this.beforeDataReport === 'function') {\n      transportData = await this.beforeDataReport(transportData)\n      if (!transportData) return\n    }\n    let dsn = this.dsn\n    if (isEmpty(dsn)) {\n      logger.error('dsn为空，没有传入监控错误上报的dsn地址，请在init中传入')\n      return\n    }\n    if (typeof this.configReportUrl === 'function') {\n      dsn = this.configReportUrl(transportData, dsn)\n      if (!dsn) return\n    }\n    this.sendToServer(transportData, dsn)\n  }\n  /**\n   * post方式，子类需要重写\n   *\n   * @abstract\n   * @param {(TransportDataType | any)} data\n   * @param {string} url\n   * @memberof BaseTransport\n   */\n  abstract post(data: TransportDataType | any, url: string): void\n  /**\n   * 最终上报到服务器的方法，需要子类重写\n   *\n   * @abstract\n   * @param {(TransportDataType | any)} data\n   * @param {string} url\n   * @memberof BaseTransport\n   */\n  abstract sendToServer(data: TransportDataType | any, url: string): void\n  /**\n   * 获取上报的格式\n   *\n   * @abstract\n   * @param {ReportDataType} data\n   * @return {TransportDataType}  {TransportDataType}\n   * @memberof BaseTransport\n   */\n  abstract getTransportData(data: ReportDataType): TransportDataType\n}\n","import { BaseOptions } from '@mitojs/core'\nimport { ToStringTypes } from '@mitojs/shared'\nimport { validateOptionsAndSet } from '@mitojs/utils'\nimport { WxOptionsFieldsTypes } from './types'\n\nexport class WxOptions extends BaseOptions<WxOptionsFieldsTypes> {\n  // wx-mini lifecycle\n  // App\n  appOnLaunch: Function = () => {}\n  appOnShow: Function = () => {}\n  appOnHide: Function = () => {}\n  //Page\n  pageOnLoad: Function = () => {}\n  pageOnShow: Function = () => {}\n  pageOnReady: Function = () => {}\n  pageOnHide: Function = () => {}\n  pageOnUnload: Function = () => {}\n  onPageNotFound: Function = () => {}\n  onShareAppMessage: Function = () => {}\n  onShareTimeline: Function = () => {}\n  onTabItemTap: Function = () => {}\n  // silent options\n  /**\n   * 静默监控Xhr事件\n   */\n  silentRequest: boolean\n  /**\n   * 静默监控console事件\n   */\n  silentConsole: boolean\n  /**\n   * 静默监控Dom事件\n   */\n  silentDom: boolean\n  /**\n   * 静默监控小小程序Route切换\n   */\n  silentMiniRoute: boolean\n  /**\n   * 静默监控error事件\n   */\n  silentError: boolean\n  /**\n   * 静默监控unhandledrejection事件\n   */\n  silentUnhandledrejection: boolean\n  // need return opitons，so defaul value is undefined\n  wxNavigateToMiniProgram: Function\n  triggerWxEvent: Function = () => {}\n  constructor(options: WxOptionsFieldsTypes) {\n    super()\n    super.bindOptions(options)\n    this.bindOptions(options)\n  }\n  bindOptions(options: WxOptionsFieldsTypes) {\n    const {\n      beforeAppAjaxSend,\n      appOnLaunch,\n      appOnShow,\n      appOnHide,\n      pageOnLoad,\n      pageOnReady,\n      pageOnShow,\n      pageOnUnload,\n      pageOnHide,\n      onPageNotFound,\n      onShareAppMessage,\n      onShareTimeline,\n      onTabItemTap,\n      wxNavigateToMiniProgram,\n      triggerWxEvent,\n      silentRequest,\n      silentConsole,\n      silentDom,\n      silentMiniRoute,\n      silentError,\n      silentUnhandledrejection\n    } = options\n    // silent type\n    const booleanOptions = [\n      [silentRequest, 'silentRequest'],\n      [silentConsole, 'silentConsole'],\n      [silentDom, 'silentDom'],\n      [silentMiniRoute, 'silentMiniRoute'],\n      [silentError, 'silentError'],\n      [silentUnhandledrejection, 'silentUnhandledrejection']\n    ]\n    validateOptionsAndSet.call(this, booleanOptions, ToStringTypes.Boolean)\n    const functionOptions = [\n      // mito hooks\n      [beforeAppAjaxSend, 'beforeAppAjaxSend'],\n      // wx-mini hooks\n      [appOnLaunch, 'appOnLaunch'],\n      [appOnShow, 'appOnShow'],\n      [appOnHide, 'appOnHide'],\n      [pageOnLoad, 'pageOnLoad'],\n      [pageOnReady, 'pageOnReady'],\n      [pageOnShow, 'pageOnShow'],\n      [pageOnUnload, 'pageOnUnload'],\n      [pageOnHide, 'pageOnHide'],\n      [onPageNotFound, 'onPageNotFound'],\n      [onShareAppMessage, 'onShareAppMessage'],\n      [onShareTimeline, 'onShareTimeline'],\n      [onTabItemTap, 'onTabItemTap'],\n      [wxNavigateToMiniProgram, 'wxNavigateToMiniProgram'],\n      [triggerWxEvent, 'triggerWxEvent']\n    ]\n    validateOptionsAndSet.call(this, functionOptions, ToStringTypes.Function)\n  }\n}\n","import { ToStringTypes } from '@mitojs/shared'\nimport { toStringValidateOption } from '@mitojs/utils'\nimport { ReportDataType } from '@mitojs/types'\nimport { BaseTransport } from '@mitojs/core'\nimport { WxOptionsFieldsTypes } from './types'\n\nexport class WxTransport extends BaseTransport<WxOptionsFieldsTypes> {\n  configReportWxRequest: unknown\n  useImgUpload = false\n  constructor(options: Partial<WxOptionsFieldsTypes> = {}) {\n    super()\n    super.bindOptions(options)\n  }\n  post(data: any, url: string) {\n    const requestFun = (): void => {\n      let requestOptions = { method: 'POST' } as WechatMiniprogram.RequestOption\n      if (typeof this.configReportWxRequest === 'function') {\n        const params = this.configReportWxRequest(data)\n        // default method\n        requestOptions = { ...requestOptions, ...params }\n      }\n      requestOptions = {\n        ...requestOptions,\n        data: JSON.stringify(data),\n        url\n      }\n      wx.request(requestOptions)\n    }\n    this.queue.addTask(requestFun)\n  }\n  sendToServer(data: any, url: string) {\n    return this.post(data, url)\n  }\n  getTransportData(data: ReportDataType) {\n    return {\n      authInfo: this.getAuthInfo(),\n      data\n    }\n  }\n  bindOptions(options: WxOptionsFieldsTypes = {}) {\n    const { configReportWxRequest } = options\n    toStringValidateOption(configReportWxRequest, 'configReportWxRequest', ToStringTypes.Function) &&\n      (this.configReportWxRequest = configReportWxRequest)\n  }\n}\n","import { Breadcrumb, BaseClient } from '@mitojs/core'\nimport { BrowserBreadcrumbTypes, BrowserEventTypes, ErrorTypes, EventTypes, MitoLog } from '@mitojs/shared'\nimport {\n  extractErrorStack,\n  firstStrtoUppercase,\n  getBreadcrumbCategoryInBrowser,\n  getCurrentRoute,\n  getTimestamp,\n  isError,\n  Severity,\n  unknownToString\n} from '@mitojs/utils'\nimport { LogTypes } from '@mitojs/types'\nimport { WxOptions } from './wxOptions'\nimport { WxTransport } from './wxTransport'\nimport { WxOptionsFieldsTypes } from './types'\n\nexport class WxClient extends BaseClient<WxOptionsFieldsTypes, EventTypes> {\n  transport: WxTransport\n  options: WxOptions\n  breadcrumb: Breadcrumb<WxOptionsFieldsTypes>\n  constructor(options: WxOptionsFieldsTypes = {}) {\n    super(options)\n    this.options = new WxOptions(options)\n    this.transport = new WxTransport(options)\n    this.breadcrumb = new Breadcrumb(options)\n  }\n  /**\n   * 判断当前插件是否启用，用于browser的option\n   *\n   * @param {BrowserEventTypes} name\n   * @return {*}\n   * @memberof BrowserClient\n   */\n  isPluginEnable(name: BrowserEventTypes): boolean {\n    const silentField = `silent${firstStrtoUppercase(name)}`\n    console.log('silentField', silentField)\n    return !this.options[silentField]\n  }\n  log(data: LogTypes) {\n    const { message = 'empty', tag = '', level = Severity.Critical, ex = '' } = data\n    let errorInfo = {}\n    if (isError(ex)) {\n      errorInfo = extractErrorStack(ex, level)\n    }\n    const error = {\n      type: ErrorTypes.LOG,\n      level,\n      message: unknownToString(message),\n      name: MitoLog,\n      customTag: unknownToString(tag),\n      time: getTimestamp(),\n      url: getCurrentRoute(),\n      ...errorInfo\n    }\n    const breadcrumbStack = this.breadcrumb.push({\n      type: BrowserBreadcrumbTypes.CUSTOMER,\n      category: getBreadcrumbCategoryInBrowser(BrowserBreadcrumbTypes.CUSTOMER),\n      data: message,\n      level: Severity.fromString(level.toString())\n    })\n    this.transport.send(error, breadcrumbStack)\n  }\n}\n","import xhrPlugin from 'packages/browser/src/plugins/xhr'\nimport wxAppPlugins from './plugins/wxApp'\nimport wxConsolePlugin from './plugins/wxConsole'\nimport wxDomPlugin from './plugins/wxDom'\nimport wxPagePlugins from './plugins/wxPage'\nimport wxRoutePlugin from './plugins/wxRoute'\nimport { WxOptionsFieldsTypes } from './types'\nimport { WxClient } from './wxClient'\n\nfunction createWxInstance(options: WxOptionsFieldsTypes) {\n  const wxClient = new WxClient(options)\n  const plugins = [xhrPlugin, wxRoutePlugin, wxConsolePlugin, wxDomPlugin, ...wxAppPlugins, ...wxPagePlugins]\n  wxClient.use(plugins)\n  return wxClient\n}\n\nconst init = createWxInstance\nexport { init }\n"],"names":[],"mappings":"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"}